# 核心概念指南：给编程小白的 Vibe-Specs 入门

如果你看到“契约”、“不变式”这些词感到头大，别担心！这篇文档就是为你准备的。我们将用生活中的例子来解释 Vibe-Specs 背后的思想。

---

## 1. 什么是“Spec”（规格说明书）？

想象你要装修房子。

*   **没有 Spec**: 你跟装修师傅口头说：“给我弄得漂亮点，要温馨。”
    *   *结果*：师傅给你刷了大红墙，装了霓虹灯。你崩溃了，因为这完全不是你想要的。
*   **有 Spec**: 你给师傅一张图纸，详细写着：“墙面色号 #F5F5DC，灯光色温 3000K。”
    *   *结果*：师傅按图施工，做出来的跟你想的一模一样。

在 Vibe-Specs 中，**Spec** 就是你写给 AI（你的装修师傅）的那份详细图纸。你写得越清楚，AI 写出的代码就越靠谱。

---

## 2. 什么是“契约”（Contract）？

**契约就是一份“承诺书”。**

就像你去在网购：
*   **你的承诺**：我付钱，填对地址。
*   **商家的承诺**：我给你发货，保证正品。

在代码世界里：
*   **函数（商家）** 说：“只要你传给我一个数字（你的承诺），我就返回它的平方（我的承诺）。”

Vibe-Specs 里的 **L1 Contracts** 就是用来定义这些承诺的。我们不需要关心商家是怎么发货的（是顺丰还是圆通），我们只关心“我付钱，我要货”这个承诺是否兑现。

---

## 3. 什么是“不变式”（Invariant）？

**不变式就是“绝对不能打破的铁律”。**

想象一个银行保险柜：
*   不管是存钱、取钱、转账，还是遭遇停电、地震。
*   **铁律**：保险柜里的总金额，必须等于所有账本记录之和。

如果有一天，保险柜里的钱比账本少了一分钱，那就是**出大事了**（Bug）。

在 Vibe-Specs 中，我们定义这些“铁律”，让计算机疯狂地随机测试系统。
*   比如文件系统：*“如果我删了一个文件，它绝对不能自己复活。”*
*   只要测试中发现文件“复活”了，系统就立刻报警：打破铁律了！

---

## 4. 什么是“状态机”（State Machine）？

想象你在玩一个游戏手柄：
*   你可以按 `A`，按 `B`，按 `上下左右`。
*   你按键的**顺序**不同，游戏里的**状态**就不同。

**状态机测试** 就像是一个不知疲倦的机器人，拿着手柄疯狂乱按：
1.  先按A（创建文件）
2.  再按B（修改文件）
3.  又按A（再次创建）
4.  突然拔电源（模拟故障）

甚至按上几万次！

它的目的就是为了找出：“有没有某一种特定的按键顺序，能让游戏崩溃？”。这就是 Vibe-Specs 帮你做的事情：**它可以自动生成成千上万种操作序列，试图找出那你永远想不到的 Bug。**

---

## 总结

*   **Spec**: 装修图纸（告诉 AI 做什么）
*   **Contract (契约)**: 买卖承诺（输入对，输出就得对）
*   **Invariant (不变式)**: 宇宙铁律（无论如何都不能违反的规则）
*   **State Machine (状态机)**: 疯狂乱按的测试机器人（帮你找 Bug）
