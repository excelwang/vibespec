spec_id: CONTRACTS.VALIDATION_MODE
type: agent_contract
description: "Agent contracts for validation mode"

contracts:
  - id: REPORT
    requirement: "Agent MUST summarize orphans, ratio warnings, terminology issues"
    cases:
      - name: "Reports findings"
        given:
          validation_result:
            orphans: ["ORPHAN_A"]
            warnings: ["ratio warning"]
        then:
          behavior: "Agent presents all findings to user"
        evaluation: llm

  - id: FIX_PROPOSAL
    requirement: "Agent MUST generate ideas for found errors"
    cases:
      - name: "Creates fix ideas"
        given:
          errors: ["dangling ref"]
        then:
          behavior: "Agent creates idea file to fix the error"
        evaluation: llm

  - id: COMPILE_PROMPT
    requirement: "Agent SHOULD prompt for compilation on pass"
    cases:
      - name: "Prompts for compile"
        given:
          validation_result: "all pass"
        then:
          behavior: "Agent suggests running compile"
        evaluation: llm
