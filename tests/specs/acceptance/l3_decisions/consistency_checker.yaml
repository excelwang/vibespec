spec_id: CONSISTENCY_CHECKER
type: decision
description: "Checks consistency across spec layers"

cases:
  - name: "Normal: IDs match across layers"
    given:
      l1_refs: ["VISION.A", "VISION.B"]
      l0_ids: ["VISION.A", "VISION.B", "VISION.C"]
    when: "Agent checks consistency"
    then:
      action: pass
    evaluation: llm

  - name: "Error: Dangling reference detected"
    given:
      l1_refs: ["VISION.X"]
      l0_ids: ["VISION.A", "VISION.B"]
    when: "Agent checks consistency"
    then:
      action: error
      dangling: ["VISION.X"]
    evaluation: llm
